# å¿«é€Ÿå®‰è£…æŒ‡å— - é¿å…ç¼–è¯‘é”™è¯¯

## é—®é¢˜

å®‰è£… `clip-score` æ—¶é‡åˆ°ç¼–è¯‘é”™è¯¯ï¼š
```
Building wheel for filterpy (pyproject.toml) ... error
exit code: -9
```

## âœ… æ¨èå®‰è£…æ–¹æ¡ˆï¼ˆæ— éœ€ç¼–è¯‘ï¼‰

### æ–¹æ¡ˆ1ï¼šåªå®‰è£…å¯ä»¥ç›´æ¥pip installçš„æ¡†æ¶ï¼ˆæœ€æ¨èï¼‰

```bash
# åŸºç¡€ä¾èµ–
pip install opencv-python numpy matplotlib

# è§†é¢‘è´¨é‡è¯„ä¼°ï¼ˆéƒ½æœ‰é¢„ç¼–è¯‘åŒ…ï¼Œæ— éœ€ç¼–è¯‘ï¼‰
pip install lpips
pip install pyiqa
```

**ä¼˜ç‚¹ï¼š**
- âœ… æ— éœ€ç¼–è¯‘ï¼Œå®‰è£…å¿«é€Ÿ
- âœ… LPIPSï¼šæ„ŸçŸ¥ç›¸ä¼¼åº¦è¯„ä¼°ï¼Œæœ€æ¨è
- âœ… IQA-PyTorchï¼šç»¼åˆå·¥å…·ç®±ï¼ŒåŒ…å«å¤šç§æŒ‡æ ‡

### æ–¹æ¡ˆ2ï¼šå¦‚æœéœ€è¦CLIPåŠŸèƒ½

```bash
# ä½¿ç”¨å®˜æ–¹CLIPåº“ï¼ˆæ›´ç¨³å®šï¼‰
pip install git+https://github.com/openai/CLIP.git

# ç„¶åä½¿ç”¨ clipscore_simple.py
python clipscore_simple.py image.jpg "a beautiful sunset"
```

**ä¼˜ç‚¹ï¼š**
- âœ… å®˜æ–¹ç»´æŠ¤ï¼Œæ›´ç¨³å®š
- âœ… é€šå¸¸æœ‰é¢„ç¼–è¯‘ç‰ˆæœ¬
- âœ… é¿å…ç¼–è¯‘filterpyå’Œopenai-clip

---

## ğŸ“¦ å®Œæ•´å®‰è£…å‘½ä»¤

### æœ€æ¨èçš„ç»„åˆï¼š

```bash
# 1. åŸºç¡€ä¾èµ–
pip install opencv-python numpy matplotlib

# 2. è§†é¢‘è´¨é‡è¯„ä¼°ï¼ˆæ— éœ€ç¼–è¯‘ï¼‰
pip install lpips pyiqa

# 3. å¦‚æœéœ€è¦CLIPåŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
pip install git+https://github.com/openai/CLIP.git
```

### å¦‚æœç½‘ç»œæ…¢ï¼Œä½¿ç”¨å›½å†…é•œåƒï¼š

```bash
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple \
  opencv-python numpy matplotlib lpips pyiqa
```

---

## ğŸš« é¿å…å®‰è£…çš„åŒ…

ä»¥ä¸‹åŒ…éœ€è¦ç¼–è¯‘ï¼Œå¯èƒ½å¤±è´¥ï¼š
- âŒ `clip-score` - ä¾èµ–filterpyå’Œopenai-clip
- âŒ `filterpy` - éœ€è¦ç¼–è¯‘
- âŒ `openai-clip` - éœ€è¦ç¼–è¯‘

**æ›¿ä»£æ–¹æ¡ˆï¼š** ä½¿ç”¨å®˜æ–¹CLIPåº“ + `clipscore_simple.py`

---

## âœ… éªŒè¯å®‰è£…

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
python test_advanced_metrics.py
```

è¿™ä¼šæ£€æŸ¥å“ªäº›æ¡†æ¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ä½¿ç”¨LPIPSï¼ˆæ¨èï¼‰ï¼š

```python
import lpips

loss_fn = lpips.LPIPS()
# è®¡ç®—æ„ŸçŸ¥ç›¸ä¼¼åº¦
distance = loss_fn(img0, img1)
```

### ä½¿ç”¨CLIPScoreï¼ˆå¦‚æœå®‰è£…äº†CLIPï¼‰ï¼š

```python
from clipscore_simple import calculate_clipscore

score = calculate_clipscore('image.jpg', 'a beautiful sunset')
print(f"CLIPScore: {score}")
```

---

## ğŸ”§ å¦‚æœä»ç„¶é‡åˆ°ç¼–è¯‘é”™è¯¯

### 1. æ£€æŸ¥Pythonç‰ˆæœ¬

```bash
python --version
# æ¨è Python 3.8-3.11
```

### 2. æ›´æ–°pipå’Œæ„å»ºå·¥å…·

```bash
pip install --upgrade pip setuptools wheel
```

### 3. ä½¿ç”¨é¢„ç¼–è¯‘åŒ…

```bash
# å¼ºåˆ¶ä½¿ç”¨é¢„ç¼–è¯‘åŒ…
pip install --only-binary=all <package_name>
```

### 4. å¦‚æœå¿…é¡»ç¼–è¯‘ï¼Œå¢åŠ èµ„æº

```bash
# å‡å°‘å¹¶è¡Œç¼–è¯‘
export MAX_JOBS=1
pip install <package_name>
```

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `å®‰è£…é—®é¢˜è§£å†³æ–¹æ¡ˆ.md` - è¯¦ç»†çš„é—®é¢˜åˆ†æå’Œè§£å†³æ–¹æ¡ˆ
- `clipscore_simple.py` - ä½¿ç”¨å®˜æ–¹CLIPåº“çš„CLIPScoreå®ç°
- `test_advanced_metrics.py` - æµ‹è¯•è„šæœ¬

---

## æ€»ç»“

**æ¨èå®‰è£…ï¼š**
```bash
pip install lpips pyiqa
```

**å¦‚æœéœ€è¦CLIPï¼š**
```bash
pip install git+https://github.com/openai/CLIP.git
```

**é¿å…ï¼š**
```bash
# ä¸è¦å®‰è£…è¿™äº›ï¼ˆéœ€è¦ç¼–è¯‘ï¼‰
# pip install clip-score
```

